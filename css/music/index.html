<!-- Control de música -->
<div class="audio-control" id="audioControl">
    <i class="fa fa-volume-up"></i>
    <i class="fa fa-volume-mute"></i>
</div>

<!-- Audio elemento -->
<audio id="backgroundMusic" loop>
    <source src="music/Halloween.mpeg" type="audio/mpeg">
</audio>

<!-- Script para control de audio -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    const audioControl = document.getElementById('audioControl');
    const backgroundMusic = document.getElementById('backgroundMusic');
    
    // Establecer volumen inicial
    backgroundMusic.volume = 0.5;
    
    // Función para reproducir/pausar música
    function toggleMusic() {
        if (backgroundMusic.paused) {
            backgroundMusic.play();
            audioControl.classList.add('playing');
        } else {
            backgroundMusic.pause();
            audioControl.classList.remove('playing');
        }
    }
    
    // Evento click para el botón de control
    audioControl.addEventListener('click', toggleMusic);
    
    // Autoplay con interacción del usuario
    document.addEventListener('click', function initAudio() {
        backgroundMusic.play().catch(function(error) {
            console.log("Reproducción automática bloqueada");
        });
        document.removeEventListener('click', initAudio);
    }, { once: true });
});
</script>
// Función para ajustar el volumen gradualmente
function fadeVolume(direction, duration = 2000) {
    const music = document.getElementById('backgroundMusic');
    const steps = 20;
    const stepTime = duration / steps;
    const volumeStep = direction === 'in' ? 0.5 / steps : -0.5 / steps;
    
    let currentStep = 0;
    
    const fadeInterval = setInterval(() => {
        currentStep++;
        music.volume = Math.max(0, Math.min(1, music.volume + volumeStep));
        
        if (currentStep >= steps) {
            clearInterval(fadeInterval);
        }
    }, stepTime);
}

// Función para iniciar la música con fade in
function startMusicWithFade() {
    const music = document.getElementById('backgroundMusic');
    music.volume = 0;
    music.play();
    fadeVolume('in');
}

// Función para pausar la música con fade out
function stopMusicWithFade() {
    fadeVolume('out');
    setTimeout(() => {
        document.getElementById('backgroundMusic').pause();
    }, 2000);
}

// Evento para cuando la página pierde el foco
document.addEventListener('visibilitychange', () => {
    if (document.hidden) {
        fadeVolume('out');
    } else {
        fadeVolume('in');
    }
});
